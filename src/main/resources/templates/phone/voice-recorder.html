<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ìŒì„± ë…¹ìŒ</title>
    <link rel="stylesheet" href="/css/common.css">
    <link rel="stylesheet" href="/css/voice-recorder.css">
</head>
<body>
    <div class="desktop-wrapper">
        <div class="phone-container">
            <div class="phone-screen">
                <div id="listView">
                    <div class="app-header voice">
                        <span class="back-button" th:attr="data-user-id=${userId}" onclick="goBack(this.dataset.userId)">â†</span>
                        <h1>ìŒì„± ë…¹ìŒ</h1>
                    </div>

                    <div class="scrollable-content">
                        <div class="list-item" th:each="npc : ${recordNpcList}" th:attr="data-npc-id=${npc.npcId}" onclick="openChat(this.dataset.npcId)">
                            <div class="recording-header">
                                <div class="recording-icon">ğŸ¤</div>
                                <div class="recording-info">
                                    <div class="recording-title">[[${npc.npcName}]]</div>
                                    <div class="recording-date">[[${#temporals.format(npc.createDateTime, 'yyyy.MM.dd a hh:mm')}]]</div>
                                </div>
                                <!--<div class="recording-duration">03:33</div>-->
                            </div>
                        </div>
                    </div>
                </div>

                <div class="chat-view" id="chatView">
                    <div class="app-header voice">
                        <span class="back-button" onclick="closeChat()">â†</span>
                        <h1 id="chatTitle">ëŒ€í™” ë‚´ìš©</h1>
                    </div>

                    <div class="chat-container" id="chatContainer">

                    </div>
                </div>
            </div>
        </div>
    </div>

    <div th:each="npc : ${recordNpcList}" th:id="'chat-' + ${npc.npcId}" th:class="'chat-container'">
        <div th:each="msg : ${recordInfoMap[npc.vrnIdx]}"
             th:class="'chat-message ' + (${msg.isUser} ? 'right' : 'left')">
            <span th:text="${msg.contents}">ë©”ì‹œì§€ ë‚´ìš©</span>
            <div class="message-time" th:text="${#temporals.format(msg.createDateTime, 'HH:mm')}">00:00</div>
        </div>
    </div>

    <script src="/js/library/jquery-3.6.0.min.js"></script>
    <script src="/js/common.js"></script>
    <script src="/js/voice-recorder.js"></script>
</body>
</html>
